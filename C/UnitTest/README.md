# UnitTest library

## Content
This library allows you to run unit tests on your project. You will be able to check the good behaviour of your functions, by testing them one by one. 

This library gives you three macros :
- `TEST(test_function)` : It runs a test function. If the test is passed, it displays <span style="color: rgb(0,255,0)">Success</span> and the time taken by the function, otherwise, it displays <span style="color: rgb(255,0 ,0)">Failed</span> and exits the programm. 
- `TTEST(test_function, timeout)` : It has the same behaviour of the funtion `TEST()`, but,if the test function lasts longer than the timeout, it displays <span style="color: rgb(255,0 ,0)">Timeout</span>, the time out, and it exit the programm.
- `assert(expression)` : It has to be used in a test function. If the expression is true, it continues, but if the expression is false, the test is failed and the programm stops.




## Exemple of utilisation

```cpp
void myTestFunction()
{
    ...
    assert(expr); // To test an expression (which is a boolean)
    ...
}

void main(void)
{
    TEST(myTestFunction); // To test the function
    TTEST(myTestFunction, 1000); // To test the function with a timeout (here, the function must finish in 1 second maximum)
}
```


## Advices

We advice you to create a **separate directory** for tests. In this directory, you will have your file(s) with the tests and a Makefile to run it easily (you can also use your principal Makefile and create a command `make test` that will do the same thing). It's better to have a `main` only for tests than to run them in your principal program. Like this, you will be able to split tasks if you work on team.

## Warnings

`TEST`, `TTEST` and `assert` are macros ! Therefore, **Don't name your functions, class or variables like that!** If you do, it will lead to errors because the macro will replace your function, class or variable !

Also, try to avoid:
- `bool __its_unit_test_c_running` and `pthread_t __its_unit_test_c_load`, they are global variables used inside the library.
- `void *__its_unit_test_c_loadingEffect(void *arg)` and `void __its_unit_test_cpp_timeout(long int time, pthread_t *launch_func)`, they are functions used inside the library.

**If you decide to use , it can lead to unexpected behavior.**

If you use *valgrind* on the tests and a test <span style="color: red">fail</span> with a <span style="color: red">timeout</span> error, this library will generate a memory leak. If a test end differently (<span style="color: green">succeed</span> or <span style="color: red">failed</span> (not timed out)), no memory leaks will be generated by this library.

## Contributors
- [Hugo LAULLIER](https://github.com/HugoLaullier)
- [Thomas RIVES](https://github.com/ThomasRives)
